" what it is:
"   send the selected text (under visual mode) to an external REPL to eval
" install:
"   you need to install tmux first, and config tmux to have multiple panes
"   with pane 1 the REPL (eg, python)
" usage:
"   select text ('v', 'V' or 'C-V') then 'e'
" explain:
"   Firstly yank ('y') the selected text into register '@"', later 
"   getreg('"') to get the content.
"   Then make a temp file and pipe the register content to it with blank
"   lines stripped and a new line append to the last.
"   Finally use tmux to load from the temp file and send to pane 1

vmap e y:call system("TMPBUF=`mktemp /tmp/tmpbuf.XXXXXX` && trap \"rm $TMPBUF\" EXIT && grep . > $TMPBUF && echo >> $TMPBUF && tmux loadb $TMPBUF \\; pasteb -d -t .1", getreg('"'))<CR><CR>
